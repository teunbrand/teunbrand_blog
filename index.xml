<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>**Blog** | Teun van den Brand</title>
<link>https://teunbrand.github.io/teunbrand_blog/</link>
<atom:link href="https://teunbrand.github.io/teunbrand_blog/index.xml" rel="self" type="application/rss+xml"/>
<description></description>
<generator>quarto-1.5.57</generator>
<lastBuildDate>Thu, 31 Oct 2024 23:00:00 GMT</lastBuildDate>
<item>
  <title>Guidance for legendry</title>
  <dc:creator>Teun van den Brand</dc:creator>
  <link>https://teunbrand.github.io/teunbrand_blog/posts/2024-11-01-legendry-0-1-0/</link>
  <description><![CDATA[ 





<p>
<img src="https://teunbrand.github.io/teunbrand_blog/posts/2024-11-01-legendry-0-1-0/legendry.png" align="right" style="width:50%;max-width:200px;margin-left:20pt">
</p>
<p>I‚Äôm glad to announce that the <a href="https://teunbrand.github.io/legendry/">legendry</a> package has landed on <a href="https://cran.r-project.org/package=legendry">CRAN</a>! It is a <a href="https://ggplot2.tidyverse.org/">ggplot2</a> extension package, focussed on expanding the guide options. If you‚Äôre looking to try out legendry yourself, you can install it with:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install.packages</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"legendry"</span>)</span></code></pre></div>
</div>
<p>I like plot annotations. Guides are among the most important plot annotations, as they instruct an observer on how a graphic should be interpreted. They are essential in getting the data to divulge their story.</p>
<p>I‚Äôve always found it hard to place annotations outside the panels of a plot and usually resorted to post-editing the figures in vector graphics software such as Adobe Illustrator to nicely place these. However, as people might be aware, it can take several iterations to get from the first serious figure to the final figure you use in your communication. This makes editing the figures every time very cumbersome. In addition, it is not reproducible, so we should aim to incorporate some flexibility in annotating our figures. This package is my attempt at that.</p>
<section id="growing-this-package" class="level2">
<h2 class="anchored" data-anchor-id="growing-this-package">Growing this package</h2>
<p>The seed that sprouted this package germinated in April 2020. Hey, it was at a time when <em>we all</em> were looking into alternate hobbies when the lockdowns started! In any case, the idea started as <a href="https://teunbrand.github.io/ggh4x/reference/guide_axis_nested.html"><code>guide_axis_nested()</code></a> in <a href="https://teunbrand.github.io/ggh4x/">ggh4x</a>, which was ultimately reincarnated as: ‚Ä¶ <a href="https://teunbrand.github.io/legendry/reference/guide_axis_nested.html"><code>guide_axis_nested()</code></a>.</p>
<p>However, I took some convincing to take the guide related functionality in ggh4x and make an offshoot package. (Like any self-respecting amateur developer, I had no idea what the scope of ggh4x should be). The first graft of this offshoot was called ‚Äògguidance‚Äô, traditionally using the ‚Äògg‚Äô-prefix before ggplot2 extension packages, and it was about guides ü§∑Ô∏è.Nobody, including myself knew how to pronounce this name, so that is how ‚Äòlegendry‚Äô was born.</p>
<p>At the time, <a href="https://github.com/tidyverse/ggplot2/issues/3329">the issue</a> was that the guide system, as one of the last vestiges in ggplot2, was still written in the S3 object oriented programming style. This lacked the great extensibility of other ggplot2 systems, like stats, geoms or facets that all uses the rather specialised ‚Äîbut highly flexible‚Äî ggproto system. As such, the guide system was explicitly advertised as <em>not</em> an extension point.</p>
<p>It took a bit of path clearing to build legendry. To cut a long story significantly shorter: I volunteered for the rewrite, got offered a job maintaining ggplot2, and midwifed the 3.5.0 release of ggplot2 which formally makes guides an extension point.</p>
</section>
<section id="concepts-in-legendry" class="level2">
<h2 class="anchored" data-anchor-id="concepts-in-legendry">Concepts in legendry</h2>
<p>The package has <a href="https://teunbrand.github.io/legendry/index.html">website</a> including vignettes to talk you through most of its functionality. As such, I‚Äôll try to convey the big picture ideas here and leave the details up for you to peruse at your leisure.</p>
<section id="scale-interaction" class="level3">
<h3 class="anchored" data-anchor-id="scale-interaction">Scale interaction</h3>
<p>Perhaps the most gentle introduction is legendry is that you now have the power to intervene in what scales pass on to guides. Most guides in legendry accept a <code>key</code> argument, that you can customise to some degree. You can read more in the <a href="https://teunbrand.github.io/legendry/articles/keys.html">vignette</a>, but here are three examples using axes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(legendry)</span>
<span id="cb2-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Loading required package: ggplot2</span></span>
<span id="cb2-3"></span>
<span id="cb2-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(msleep, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(sleep_total, bodywt)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb2-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">na.rm =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb2-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_log10</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb2-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">guides</span>(</span>
<span id="cb2-8">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># A regular key, but add minor ticks</span></span>
<span id="cb2-9">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">guide_axis_base</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">key =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"minor"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Total sleep (hours)"</span>),</span>
<span id="cb2-10">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># A log key</span></span>
<span id="cb2-11">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">guide_axis_base</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">key =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"log"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Body weight (kg)"</span>),</span>
<span id="cb2-12">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># A manual key</span></span>
<span id="cb2-13">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x.sec =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">guide_axis_base</span>(</span>
<span id="cb2-14">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">key =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">key_manual</span>(</span>
<span id="cb2-15">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">400</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">600</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">800</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1200</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">60</span>,</span>
<span id="cb2-16">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">400</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">600</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">800</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1200</span>),</span>
<span id="cb2-17">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tomato"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dodgerblue"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">length.out =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>)</span>
<span id="cb2-18">      ),</span>
<span id="cb2-19">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"minutes"</span></span>
<span id="cb2-20">    )</span>
<span id="cb2-21">  )</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://teunbrand.github.io/teunbrand_blog/posts/2024-11-01-legendry-0-1-0/index_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="complete-guides" class="level3">
<h3 class="anchored" data-anchor-id="complete-guides">Complete guides</h3>
<p>The package has a few ‚Äòcomplete‚Äô guides that are drop-in replacements for ggplot2‚Äôs guides. Sometimes, these attempt to literally mirror ggplot2‚Äôs guides, give or take a few tweaks, like <code>guide_axis_base()</code> or <code>guide_legend_base()</code>. Other times, these convey novel relations between items, like <code>guide_axis_nested()</code> useful for indicating ranges, or <code>guide_legend_groups()</code> for indicating groups.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">food <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(</span>
<span id="cb3-2">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">category =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Meat"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Meat"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Vegetables"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Vegetables"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Dairy"</span>),</span>
<span id="cb3-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">food     =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Beef"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Chicken"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Carrots"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Onions"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cheese"</span>),</span>
<span id="cb3-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">gram     =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">85</span>,  <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">85</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">150</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">210</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">225</span>),</span>
<span id="cb3-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">calories =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">245</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">185</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">45</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">80</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">240</span>)</span>
<span id="cb3-6">)</span>
<span id="cb3-7"></span>
<span id="cb3-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(food, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">interaction</span>(food, category), calories)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb3-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_col</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(category, food))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb3-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">guides</span>(</span>
<span id="cb3-11">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Using a nested axis to visualise ranges innate to the data</span></span>
<span id="cb3-12">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"axis_nested"</span>, </span>
<span id="cb3-13">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Split up legend into groups</span></span>
<span id="cb3-14">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"legend_group"</span>,</span>
<span id="cb3-15">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Custimising nested axis to display ranges</span></span>
<span id="cb3-16">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">guide_axis_nested</span>(</span>
<span id="cb3-17">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">key_range_manual</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"low calories"</span>),</span>
<span id="cb3-18">      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Local theme to rotate y-axis text for only this guide</span></span>
<span id="cb3-19">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">theme =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text.y.left =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">angle =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">90</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hjust =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>))</span>
<span id="cb3-20">    )</span>
<span id="cb3-21">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb3-22">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Global theme</span></span>
<span id="cb3-23">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_classic</span>()</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://teunbrand.github.io/teunbrand_blog/posts/2024-11-01-legendry-0-1-0/index_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>See the accompanying <a href="https://teunbrand.github.io/legendry/articles/tour.html">vignette</a> for more details. You might wonder: ‚Äúthe existence of the term ‚Äòcomplete guides‚Äô implies the existence of ‚Äòincomplete guides‚Äô‚Äù. You‚Äôd be right. In legendry, these are called ‚Äòprimitives‚Äô, like <code>primitive_bracket()</code>, for aesthetic-agnostic building blocks and ‚Äògizmos‚Äô, as in <code>gizmo_histogram()</code>, for speciality displays.</p>
</section>
<section id="composed-guides" class="level3">
<h3 class="anchored" data-anchor-id="composed-guides">Composed guides</h3>
<p>The last idea is that we should be able to assemble complicated guides from simpler parts. There are ways to make regular guides, like <code>guide_axis_base()</code>, or even simpler guides, like <code>primitive_bracket()</code> and combine these to build rich annotations. The way guides are combined is using <code>compose_*()</code> functions. For example <code>compose_ontop()</code> will overlay two guides, whereas <code>compose_stack()</code> will draw the second guide after the first guide. Moreover, you can have compositions inside compositions, so there is some room for creativity here. It is somewhat of a tougher task to get right, so I‚Äôve tried to elaborate some more in the <a href="https://teunbrand.github.io/legendry/articles/guide_composition.html">vignette</a>. At any rate, here is an example of how guide composition can work.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">air_dates <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(</span>
<span id="cb4-2">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">year =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.Date</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1974-01-01"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1985-01-01"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1994-01-01"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2008-01-01"</span>)),</span>
<span id="cb4-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Little House</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">on the Prairie"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"The Golden</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">Girls"</span>, </span>
<span id="cb4-4">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Friends"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Breaking</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">Bad"</span>)</span>
<span id="cb4-5">)</span>
<span id="cb4-6"></span>
<span id="cb4-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Let's say we want to display when the shows started with arrows</span></span>
<span id="cb4-8">tv_show_guide <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">guide_axis_base</span>(</span>
<span id="cb4-9">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">key =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">key_map</span>(air_dates, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">aesthetic =</span> year, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> title),</span>
<span id="cb4-10">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Local theme for long arrows as ticks</span></span>
<span id="cb4-11">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">theme =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(</span>
<span id="cb4-12">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.ticks.length =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unit</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">14</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pt"</span>),</span>
<span id="cb4-13">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.ticks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_line</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">arrow =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrow</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">length =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unit</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mm"</span>)))</span>
<span id="cb4-14">  )</span>
<span id="cb4-15">)</span>
<span id="cb4-16"></span>
<span id="cb4-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># We'd like to place these arrows ontop of a regular guide</span></span>
<span id="cb4-18">ontop <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">compose_ontop</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"axis_base"</span>, tv_show_guide)</span>
<span id="cb4-19"></span>
<span id="cb4-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># In addition, we might want to annotate the ruling president at the time</span></span>
<span id="cb4-21">president_guide <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">primitive_bracket</span>(</span>
<span id="cb4-22">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">key =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">key_range_map</span>(presidential, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">start =</span> start, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">end =</span> end, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> name),</span>
<span id="cb4-23">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bracket =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"square"</span></span>
<span id="cb4-24">)</span>
<span id="cb4-25"></span>
<span id="cb4-26"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(economics, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(date, unemploy)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-27">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-28">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">guides</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">compose_stack</span>(ontop, president_guide))</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://teunbrand.github.io/teunbrand_blog/posts/2024-11-01-legendry-0-1-0/index_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="future" class="level2">
<h2 class="anchored" data-anchor-id="future">Future</h2>
<p>The package is now in a usable state, which is reflected in its release to CRAN. My hope is that together with people in the ggplot2 community, we can expand the set of guides even further! Should you find any bugs or have good ideas, the <a href="https://github.com/teunbrand/legendry">issue tracker</a> on GitHub is the place where I track these.</p>
<p>I‚Äôm looking forward to seeing some legendary plots out in the wilds!</p>


</section>

 ]]></description>
  <category>package</category>
  <category>announcement</category>
  <guid>https://teunbrand.github.io/teunbrand_blog/posts/2024-11-01-legendry-0-1-0/</guid>
  <pubDate>Thu, 31 Oct 2024 23:00:00 GMT</pubDate>
  <media:content url="https://teunbrand.github.io/teunbrand_blog/posts/2024-11-01-legendry-0-1-0/legendry.png" medium="image" type="image/png" height="204" width="144"/>
</item>
<item>
  <title>Hello world</title>
  <dc:creator>Teun van den Brand</dc:creator>
  <link>https://teunbrand.github.io/teunbrand_blog/posts/2024-10-28-hello-world/</link>
  <description><![CDATA[ 





<p>I‚Äôve never been a big blogger, so setting up my own blog is a bit of an unfamiliar process. As you are reading these words, I must have had achieved this goal despite inexperience.</p>
<p>At the time of writing, you might have stumbled upon this bloggy looking page through my activity coding in the R language. I suppose that in the future, this blog will serve some less fleeting, medium-form communication need from me to the rest of the world. I now think it will be mostly about R programming, data visualisation and ggplot2. But I certainly don‚Äôt know what the future holds. These communications will neither be perfect nor complete, but that shouldn‚Äôt stymy me from stirring up these word salads, nor stymy you from lurking about on the internet.</p>
<p>Aside from <a href="https://www.tidyverse.org/blog/2024/02/ggplot2-3-5-0/">a</a> <a href="https://www.tidyverse.org/blog/2024/02/ggplot2-3-5-0-legends/">few</a> <a href="https://www.tidyverse.org/blog/2024/02/ggplot2-3-5-0-axes/">guest</a> <a href="https://www.tidyverse.org/blog/2024/03/ggplot2-3-5-0-coord-radial/">posts</a> in another place, this is my first solo post and as such, I suppose some introduction is in order. Hello, my name is Teun<sup>1</sup> van den Brand, I live in Amsterdam, The Netherlands and have been coding in R since 2017. Previously, I‚Äôve worked as a PhD student/researcher doing computational work in the analysis of chromatin biology in the lab of <a href="https://www.nki.nl/research/research-groups/elzo-de-wit/">Elzo de Wit</a>. Essentially I‚Äôve looked at a lot of DNA sequencing data from assays on chromatin folding and organisation, which I analysed mostly in R.</p>
<p>During this time, I‚Äôve whipped up my fair share of scientific data visualisations in regular reporting, presentations and publications. I liked this part a lot. You can clearly see how differently an audience responds to a thought-out figure versus a data-dump of a figure. It engages the audience more, regardless of the obscurity of your field, which will yield more sharp-witted questions and relevant feedback for you. Naturally, this had put me into the orbit of ggplot2 as the most widely recognised visualisation paradigm in the R programming language. What started as a personal cookbook for wrangling ggplot2 figures in the exact shape I needed, turned into a collection of hacks mud-wrestling about under ggplot2‚Äôs hood, which eventually grew out to the extension package <a href="https://teunbrand.github.io/ggh4x/">ggh4x</a>. It perfectly fits the clich√© that somebody‚Äôs first package is a ‚Äòmiscellaneous‚Äô package.</p>
<p>Somehow <a href="https://www.data-imaginist.com/about">Thomas</a>, who maintains ggplot2, must have noticed that my rummaging was sufficiently useful to offer me the opportunity to do this full time. So that is the way I‚Äôve stumbled from ggplot2‚Äôs orbit to landing a paid gig to do what I already loved doing.</p>




<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Teun (/t√∏Àên/) is a very Dutch name and pronounced similar to how one would say ‚Äòtewn‚Äô or ‚Äòtuwn‚Äô in English. You can hear somebody say it <a href="https://en.wiktionary.org/wiki/File:Nl-Teun.ogg">here</a>‚Ü©Ô∏é</p></li>
</ol>
</section></div> ]]></description>
  <category>news</category>
  <guid>https://teunbrand.github.io/teunbrand_blog/posts/2024-10-28-hello-world/</guid>
  <pubDate>Sun, 27 Oct 2024 23:00:00 GMT</pubDate>
</item>
</channel>
</rss>
